<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>

<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
     fbq('init', '192998336855239'); 
    fbq('track', 'PageView');
    </script>
    <noscript>
     <img height="1" width="1" 
    src="https://www.facebook.com/tr?id=192998336855239&ev=PageView
    &noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->
    <!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
     fbq('init', '1346725896141862'); 
    fbq('track', 'PageView');
    </script>
    <noscript>
     <img height="1" width="1" 
    src="https://www.facebook.com/tr?id=1346725896141862&ev=PageView
    &noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->

<!--Category Navigation Bar-->

<div style="justify-content: space-evenly; " class="w-full h-20 sm:h-28 flex content-center mt-2">
    <% allCategory.forEach(function(category){ %>
        <a href="/Category/<%= category.pcategory %>/<%= category._id%>/1">
            <div data-chai="<%= JSON.stringify(category) %>" style="display: flex;" class="sub-cat">
                <div class="dropdown  relative  flex justify-center items-center" style=" flex-direction: column;">
                    <button class="text-gray-700 font-semibold  rounded inline-flex items-center">
                        <span class="">
                            <lottie-player src="<%= category.pimage %>" class="w-12 h-12 md:w-20 md:h-20"
                                background="transparent" speed="1" loop autoplay></lottie-player>
                        </span>
                    </button>
                    <h1 class="text-center font-medium text-xxs sm:text-xs ">
                        <%= category.pcategory %>
                    </h1>
                    <ul class="dropdown-menu absolute hidden text-gray-700 pt-1">
                    </ul>
                </div>
            </div>
        </a>
        <% }) %>
</div>


<section class="menu container mx-auto pb-8 pt-4 min-h-full">
    <div class="shadow-sm">
        <h1 class="text-xl font-bold text-center p-5 heading-font">
            <%= category.pcategory%>
        </h1>
    </div>
    <!-- 
    <div id="FilterDrop"
        class="hidde z-50 mr-4 origin-top-right absolute right-0 mt-2 w-56 rounded-md  border bg-white ring-1 ring-black ring-opacity-5 focus:outline-none mt-5"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
        <div class="py-1 shadow" role="none">
            <h5 class="font-semibold text-gray-900 block px-4 py-2 text-lg " role="menuitem" tabindex="-1">Filters
            </h5>
        </div> -->

    <!-- <div class="py-1 shadow px-4 " role="none">
            <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">PRICE</label>
            <input id="steps-range" type="range" min="0" max="4" value="2.5" step="0.5"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700">

            <form method="get" action="/s" class="py-2">
                <div class=" w-full flex">
                    <div class="w-1/2">
                        <span class="absolute text-gray-500">₹</span>
                        <input type="number" id="low-price" placeholder="Min" name="low-price" class="w-full pl-3">
                    </div>
                    <div class="w-1/2">
                        <span class="absolute text-gray-500">₹</span>
                        <input type="number" id="high-price" placeholder="Max" name="high-price" class="w-full pl-3">
                    </div>
                </div>
                <button type="submit" class="text-xs px-2 py-1 border rounded-lg mt-2">GO</button>
            </form>
        </div> -->



    <!-- Following is Main filter code by abhishek kashyap purv developer -->


    <!--
            <div id="FilterDrop"
        class="hidde z-50 mr-4 origin-top-right absolute right-0 mt-2 w-56 rounded-md  border bg-white ring-1 ring-black ring-opacity-5 focus:outline-none mt-5"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button">
        <div class="py-1 shadow" role="none">
            <h5 class="font-semibold text-gray-900 block px-4 py-2 text-lg " role="menuitem" tabindex="-1">Filters
            </h5>
        </div>
        
        <div class="py-1 shadow px-4 " role="none">
            <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">SUBCATEGORY</label>

            <form class="hidden" name="FormName"
                action="/Category/<%= category.pcategory %>/<%= category._id %>/<%= current %>">
                <input type="text" id="jaiBhavani" name="dataji" value="">
            </form>

            <form name="filterForm" action="/Category/<%= category.pcategory %>/<%= category._id %>/<%= current %>"
                method="GET">

                <% if(checked=='' && notChecked=='' ){ %>
                    <% subcategory.forEach((katrina)=> { %>
                        <div class="flex items-center mb-4 group">
                            <input type="checkbox" name='subCategories[]' value="<%= katrina._id %>"
                                class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            <label for="Brand-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">
                                <%= katrina.productSubcategory %>
                            </label>
                        </div>
                        <% }) %>
                            <% } else { %>
                                <% checked.forEach((katrina)=> { %>
                                    <div class="flex items-center mb-4 group">
                                        <input checked type="checkbox" name='subCategories[]' value="<%= katrina._id %>"
                                            class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                        <label for="Brand-1"
                                            class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">
                                            <%= katrina.productSubcategory %>
                                        </label>
                                    </div>
                                    <% }) %>
                                        <% notChecked.forEach((katrina)=> { %>
                                            <div class="flex items-center mb-4 group">
                                                <input type="checkbox" name='subCategories[]' value="<%= katrina._id %>"
                                                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                                <label for="Brand-1"
                                                    class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">
                                                    <%= katrina.productSubcategory %>
                                                </label>
                                            </div>
                                            <% }) %>
                                                <% } %>

                                                    <input type="submit" value="Apply Filter">
            </form>

        </div> -->


    <!-- Above is Main filter code by abhishek kashyap purv developer -->



    <!-- <div class="py-1 shadow px-4 " role="none">
            <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">BRAND</label>
            <div class="flex items-center mb-4 group">
                <input id="Brand-1" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="Brand-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Polylab</label>
            </div>
            <div class="flex items-center mb-4 group">
                <input id="Brand-2" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="Brand-2" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Borosil</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="Brand-3" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="Brand-3" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Merk</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="Brand-4" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="Brand-4" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Tarson</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="Brand-5" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="Brand-5"
                    class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">Thermofisher</label>
            </div>
        </div>

        <div class="py-1 shadow px-4 " role="none">
            <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">CUSTOMER RATING</label>
            <div class="flex items-center mb-4">
                <input id="rating-1" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="rating-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">4★ &
                    above</label>
            </div>
            <div class="flex items-center mb-4 hover:text-gray-900">
                <input id="rating-2" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="rating-2" class="ml-2 text-sm font-medium text-gray-500 ">3★ & above</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="rating-3" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="rating-3" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">2★ &
                    above</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="rating-4" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="rating-4" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">1★ &
                    above</label>
            </div>

        </div>

        <div class="py-1 shadow px-4 " role="none">
            <label for="steps-range" class="font-semibold text-gray-900 block text-xs py-2">DISCOUNT</label>
            <div class="flex items-center mb-4">
                <input id="discount-1" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="discount-1" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">50% &
                    more</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="discount-2" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="discount-2" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">40% &
                    more</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="discount-3" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="discount-3" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">30% &
                    more</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="discount-4" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="discount-4" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">20% &
                    more</label>
            </div>
            <div class="flex items-center mb-4">
                <input id="discount-5" type="checkbox" value=""
                    class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="discount-5" class="ml-2 text-sm font-medium text-gray-500 dark:text-gray-300">10% &
                    below</label>
            </div>

        </div> -->
    </div>



    <% if( products==undefined || products.length<=0 || !products){%>
        <div class="flex justify-center mb-10 ">
            <div class=" float-left flex items-center justify-center h-scree">
                <h1 style="font-family: 'Bangers', cursive; font-size: 50px;">well it's awkward <br /><span
                        style="color: #695CFE;"> products </span>not found</h1>
            </div>
            <lottie-player src="https://assets5.lottiefiles.com/private_files/lf30_3X1oGR.json" background="transparent"
                speed="1" style="width: 500px; height: 500px;" loop autoplay>
            </lottie-player>
        </div>

        <%}else{%>
            <div class="flex justify-end mr-1 md:mr-10">
                <form action="/Category/<%= category.pcategory %>/<%= category._id %>/<%= current %>">
                    <select name="sort" id="" class="mx-2" onchange="this.form.submit()">
                        <option role="menuitem" tabindex="-1" id="menu-item-0" value="">Sort</option>
                        <option class="font-medium text-gray-500 block px-4 py-2 text-sm hover:text-gray-900"
                            value="price-asc">Low To High</option>
                        <option class="font-medium text-gray-500 block px-4 py-2 text-sm hover:text-gray-900"
                            value="price-desc">High to Low</option>
                    </select>
                </form>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 col-gap-12 row-gap-16">
                <% products.forEach((product)=> { 
                    if(product.image[0].imgName !== "default.webp"){ %>
                        <div class="flex flex-col items-center gap-2 px-2 py-6 relative hover:shadow-lg">

                            <a href="/productDetails/<%= product.pname %>/<%= product._id %>/1"
                                class="flex flex-col items-center text-center group">
    
    
                                <div class="w-36 h-36">
                      
                                        <img draggable="false" class="w-full h-full object-contain"
                                        src="/img/<%= product.image[0].imgName %>" alt="<%= product.pname %>" />
                            
                                    </div>
    
    
                                <% if(product.variationname !='' && product.variationname !='undefined' &&
                                    product.variationname !=null && product.piecePerPack> 1) { %>
                                    <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                        <%= product.pname %> - <%= product.variationname %> (<%= product.piecePerPack %>
                                                    Pcs)
                                    </h2>
                                    <% } else if(product.variationname !='' && product.variationname !='undefined' &&
                                        product.variationname !=null) {%>
                                        <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                            <%= product.pname %> - <%= product.variationname %>
                                        </h2>
                                        <% } else { %>
                                            <h2 class="text-sm mt-4 group-hover:text-blue-500">
                                                <%= product.pname %>
                                            </h2>
                                            <% } %>
    
    
                                                <% if(product.brand){ %>
                                                    <span class="text-gray-400 text-xs ">Brand: <%= product.brand.name %>
                                                    </span>
                                                    <% } %>
    
                                                        <div class="flex flex-col gap-2 items-center">
    
                                                            <div class="flex items-center gap-1.5 text-md font-medium">
                                                                <span>₹<%= Math.ceil((product.packPrice) -
                                                                        ((product.packPrice)*(product.brand.discount)/100))
                                                                        %></span>
                                                                <% if(product.brand.discount>= 1) {%>
                                                                    <span class="text-gray-500 line-through text-xs">₹<%=
                                                                            product.packPrice %>
                                                                    </span>
                                                                    <span class="text-xs font-medium text-lime-500">
                                                                        <%= product.brand.discount %>%&nbsp;off
                                                                    </span>
                                                                    <% } %>
    
                                                            </div>
    
                                                        </div>
                            </a>
                        </div>
                    <%}else{%>
                 

                    <% }}) %>
            </div>
            <div class="bg-white px-4 flex items-center justify-center border-t border-gray-200 sm:px-6 py-5">
                <div class="hidde sm:flex-1 sm:flex sm:items-center sm:justify-center">
                    <div>
                        <div class="flex justify-center">
                            <% if (pages> 0) { %>
                                <nav aria-label="Page navigation example">
                                    <ul class="flex list-style-none">
                                        <% if (current==1) { %>
                                            <li class="page-item active disabled"><a
                                                    class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-500 pointer-events-none focus:shadow-none"
                                                    href="#" tabindex="-1" aria-disabled="true">Previous</a></li>
                                            <% } else { %>
                                                <li class="page-item active"><a
                                                        class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                        href="/Category/<%= category.pcategory %>/<%= category._id %>/<%= current-1 %>">Previous</a>

                                                </li>
                                                <% } %>
                                                    <% var i=(Number(current)> 3 ? Number(current) - 2 : 1) %>
                                                        <% if (i !==1) { %>
                                                            <li class="page-item disabled"><a
                                                                    class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                    href="#">...</a></li>
                                                            <% } %>
                                                                <% for (; i <=(Number(current) + 2) && i <=pages; i++) {
                                                                    %>
                                                                    <% if (i==current) { %>
                                                                        <li class="page-item activeList"><a
                                                                                class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                href="#">
                                                                                <%= i %>
                                                                            </a></li>
                                                                        <% } else { %>
                                                                            <li class="page-item"><a
                                                                                    class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                    href="/Category/<%= category.pcategory %>/<%= category._id %>/<%= i %>">
                                                                                    <%= i %>
                                                                                </a></li>
                                                                            <% } %>
                                                                                <% if (i==Number(current) + 2 && i <
                                                                                    pages) { %>
                                                                                    <li class="page-item disabled">
                                                                                        <a class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                            href="#">...</a>
                                                                                    </li>
                                                                                    <% } %>
                                                                                        <% } %>
                                                                                            <% if (current==pages) { %>
                                                                                                <li
                                                                                                    class="page-item disabled">
                                                                                                    <a class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                                        href="#">Next</a>
                                                                                                </li>
                                                                                                <% } else { %>
                                                                                                    <li
                                                                                                        class="page-item">
                                                                                                        <a class="page-link relative block py-1.5 px-3 border-0 bg-transparent outline-none transition-all duration-300 rounded-full text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none"
                                                                                                            href="/Category/<%= category.pcategory %>/<%= category._id %>/<%= parseInt(current)+1 %>">Next</a>
                                                                                                    </li>
                                                                                                    <% } %>
                                    </ul>
                                </nav>
                                <% } %>
                        </div>
                    </div>
                </div>
            </div>

            <%}%>
</section>

<script>

    
function india(aww) {
          $('#searchProduct').val(aww);
          document.getElementById("submitSearch").click()
      }

function sendData(e) {
        const searchResults = document.getElementById('searchResults')
        let match = e.value.match(/^[a-zA-Z ]*/);
        let match2 = e.value.match(/\s*/);
        if (match2[0] === e.value) {
          searchResults.innerHTML = '';
          return;
        }
        if (match[0] === e.value) {
          fetch('getProductNamesForSearch', {
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ payload: e.value })
          }).then(res => res.json()).then(data => {
            let payload = data.payload;
            searchResults.innerHTML = '';
            if (payload.length < 1) {
              searchResults.innerHTML = '<p>Sorry, Nothing Found.</p>';
              return;
            }
            payload.forEach((item, index) => {
              if (index > 0) searchResults.innerHTML += '<hr>';
              searchResults.innerHTML += `<div onclick="india('${item.pname}')" class="flex px-2 cursor-pointer items-center w-28"> <img class="h-10 py-1 object-contain"
                            src="/img/${ item.image[0].imgName}" alt="${item.pname}" />
                             <span class="p-2 px-4 text-xs">${item.pname}</span></div>`
            });
          });
          return;
        }
        searchResults.innerHTML = '';
      }



    $('#sort-menu-button').click(function () {

        $('#sortDrop').toggleClass('hidden')
        $('#FilterDrop').addClass('hidden')

    })


    $('#menu-item-0,#menu-item-1,#menu-item-2,#menu-item-3,#menu-item-4').click(function () {
        $('#sortDrop').toggleClass('hidden')

    })


    $('#filter-menu-button').click(function () {

        $('#FilterDrop').toggleClass('hidden')
        $('#sortDrop').addClass('hidden')
    })

    $(document).ready(function () {
        // $("form").on("submit", function (e) {
        $('form[name="filterForm"]').on("submit", function (e) {
            e.preventDefault();

            var inputVal = $('input[name="subCategories[]"]:checked');

            var subCatIdArr = []
            for (var i = 0; i < inputVal.length; i++) {
                var a = inputVal[i];
                subCatIdArr.push(a.value);
                // subCatIdArr = subCatIdArr + a.value + ", ";
            }
            console.log('object :>> ', subCatIdArr);
            $('#jaiBhavani').val(subCatIdArr);
            document.forms['FormName'].submit();

            //document.getElementById("clickOkForSub").click()  // it is working

            // $.ajax({
            //     url: "/Category/<%= category.pcategory %>/<%= category._id %>/1",
            //     type: "GET",
            //     data: { data: k }
            // }).done(function (data) {
            //     if (data.msg == "Success") {
            //         alert("Data Send Successfully")
            //     } else {
            //         alert(data.msg)
            //     }
            // })
        });
    })




    // function callFilterAjax(subcatId, CatId) {
    //     if (subcatId && CatId) {
    //         $.ajax({
    //             url: `/Category/<%= category.pcategory %>/${CatId}/${subcatId}/1`,
    //             type: "GET",
    //             data: {
    //                 subcatId: subcatId,
    //                 CatId: CatId
    //             }
    //         }).done(function (data) {
    //             if (data.msg == "Success") {
    //                 products = data.products;
    //                 console.log("hey", typeof (products))
    //                 alert("Its Done")
    //             } else {
    //                 alert(data.msg)
    //             }
    //         })
    //     } else {
    //         alert("Nananana");
    //     }
    // }



</script>
